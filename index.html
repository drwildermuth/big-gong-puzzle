<!DOCTYPE html>
<html>
<head>
  <title>The Big Gong Puzzle</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 30px;
      background-color: #f9f9f9;
    }
    .card-box, .form-box {
      border: 1px solid #ccc;
      padding: 20px;
      margin: 20px auto;
      max-width: 700px;
      background: white;
      border-radius: 10px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
    }
    input[type="text"] {
      width: 90%;
      padding: 8px;
      margin: 5px 0 15px 0;
    }
    img {
      margin-top: 20px;
      max-width: 100%;
    }
  </style>
</head>
<body>

  <h1>ğŸ‰ Welcome to The Big Gong Puzzle ğŸ‰</h1>
  <div class="card-box">
    <p><strong>Instructions:</strong><br>
    Your team must open the Big Gong box by working together. Each of you should draw at least <strong>1 character card</strong> and <strong>2 information cards</strong>. If fewer than 8 people are present, volunteers may draw extra cards. All instructions are hidden within the cards. Share information, listen carefully, and be ready to puzzle through confusion.</p>

    <button onclick="drawCard('character')">ğŸ­ Draw a Character Card</button>
    <button onclick="drawCard('info')">ğŸ§  Draw an Info Card</button>
    <div id="cardOutput"></div>
  </div>

  <div class="form-box">
    <h2>ğŸ”“ Unlock the Gong</h2>
    <p>Once you believe youâ€™ve identified the correct team and discovered the key, enter your answers below:</p>
    <input type="text" id="builders" placeholder="Enter 3 Master Builders (comma-separated)">
    <input type="text" id="assistants" placeholder="Enter 2 Assistants (comma-separated)">
    <input type="text" id="key" placeholder="Enter the key location">

    <button onclick="checkAnswer()">Submit</button>
    <div id="result"></div>
  </div>

  <script>
    const characterCards = [
      "You are Maluiks. You are a master builder. You are depressed and will only talk to your wife or to a psychologist.",
      "You are Quil. You are Maluiks' wife. You are not a builder. You can speak to Maluiks.",
      "You are Paba. You are a master builder. You only agree to build when a woman gives you a special request in ALL CAPS.",
      "You are Marjoi. You know where the key to open the Gong box is hidden. You will only share this information with someone who has taken a class with this professor before. The key is hidden behind a digital scroll labeled â€œThe Real Rules.â€",
      "You are Marlis. You are a psychologist. You enjoy building as a hobby. You can speak with depressed builders.",
      "You are Wekli. You are an assistant. You love supporting builders but are not one yourself.",
      "You are Oilki. You are not a builder and donâ€™t particularly like building. You're mostly here for the snacks.",
      "You are Polkadot. You are a wandering philosopher. You are not a builder. You give unsolicited advice and cryptic clues."
    ];

    const infoCards = [
      "The goal of this activity is to open the Big Gong box.",
      "To open the box, you must correctly identify 3 master builders and 2 assistants.",
      "It is currently a full moon.",
      "A master builder is someone who has built at least 3 pyramids and 10 homes.",
      "Maluiks has built 5 pyramids and 20 homes.",
      "Paba has built 6 pyramids and 15 homes.",
      "Marlis is not a master builder, but she loves building and can speak to people with emotional blocks.",
      "Wekli is an assistant who supports builders but has never built anything.",
      "Paba only works when a woman gives him a special request in ALL CAPS.",
      "Marjoi knows where the key is but only shares it with someone who has taken a class with this professor before.",
      "Oilki and Polkadot are not builders.",
      "Some cards are distractions. You must share and compare to make sense of it all.",
      "Each player should draw at least 1 character card and 2 information cards.",
      "You are allowed to draw additional cards if neededâ€”especially if fewer than 8 players are present.",
      "You must work together. No one has all the information alone.",
      "Once you believe you have the right team, enter their names below the card area to attempt unlocking the Gong."
    ];

    function drawCard(type) {
      const pool = type === 'character' ? characterCards : infoCards;
      const card = pool[Math.floor(Math.random() * pool.length)];
      const output = document.getElementById("cardOutput");
      output.innerHTML = `<p><strong>${type === 'character' ? 'Character Card' : 'Information Card'}:</strong><br>${card}</p>` + output.innerHTML;
    }

    function normalize(input) {
      return input.trim().toLowerCase().replace(/\s+/g, '');
    }

    function checkAnswer() {
      const correctBuilders = ["maluiks", "paba", "marjoi"];
      const correctAssistants = ["wekl i", "quil"];
      const correctKey = "therealrules";

      const userBuilders = document.getElementById("builders").value.toLowerCase().split(',').map(b => normalize(b));
      const userAssistants = document.getElementById("assistants").value.toLowerCase().split(',').map(a => normalize(a));
      const userKey = normalize(document.getElementById("key").value);

      const result = document.getElementById("result");

      const buildersMatch = correctBuilders.every(b => userBuilders.includes(b)) && userBuilders.length === 3;
      const assistantsMatch = correctAssistants.every(a => userAssistants.includes(a)) && userAssistants.length === 2;
      const keyMatch = userKey === correctKey;

      if (buildersMatch && assistantsMatch && keyMatch) {
        result.innerHTML = `
          <h3>ğŸ‰ The Gong Box opens! Your team has solved the puzzle! ğŸ‰</h3>
          <img src="https://raw.githubusercontent.com/drwildermuth/big-gong-puzzle/refs/heads/main/green_puzzle_piece_in_box_text_9416360.gif" alt="Big Gong Box Opening" />
        `;
      } else {
        result.innerHTML = `<p>âŒ The Gong remains sealed. Somethingâ€™s not quite rightâ€”keep talking and try again!</p>`;
      }
    }
  </script>

</body>
</html>
